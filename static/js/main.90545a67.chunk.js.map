{"version":3,"sources":["reducers/updateBooksList.js","reducers/updateShoppingCart.js","store.js","reducers/index.js","components/BookStoreServiceContext/BookStoreServiceContext.js","services/BookStoreService.js","components/ShopHeader/ShopHeader.js","constants/routes.js","actions/index.js","components/BooksListItem/BooksListItem.js","components/Spinner/Spinner.js","components/ErrorIndicator/ErrorIndicator.js","components/BooksList/BooksList.js","utils/compose.js","components/hoc/withBookStoreService.js","components/pages/HomePage.js","components/ShoppingCartTable/ShoppingCartTable.js","components/pages/CartPage.js","components/pages/NotFoundPage.js","components/ErrorBoundary/ErrorBoundary.js","index.js","components/App/App.js"],"names":["updateBooksList","state","type","payload","books","loading","error","booksList","updateOrder","bookId","quantity","cartItems","shoppingCart","selectedBook","find","book","id","selectedBookInCart","item","newCartItems","newCartItem","selectedBookId","amount","map","filter","createCartItems","bookInCart","title","totalPrice","price","createCartItem","orderTotalPrice","reduce","accumulator","currentItem","calculateOrderTotalPrice","cartItemsAmount","length","updateShoppingCart","store","createStore","action","applyMiddleware","thunk","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","BookStoreService","author","coverImage","Promise","resolve","setTimeout","connect","className","to","addBookToCart","fetchBooks","bookStoreService","dispatch","getBooks","then","catch","err","BooksListItem","onAddToCart","src","alt","onClick","Spinner","ErrorIndicator","BooksList","bookInfo","key","compose","functions","comp","reduceRight","wrapped","fn","Wrapped","props","bindActionCreators","useEffect","HomePage","mapDispatchToProps","onIncrease","onDecrease","onDelete","items","total","cartFooterInfo","align","text","scope","index","colSpan","CartPage","NotFoundPage","ErrorBoundary","hasError","this","setState","children","Component","ReactDOM","render","value","path","exact","component","document","getElementById"],"mappings":"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","file":"static/js/main.90545a67.chunk.js","sourcesContent":["export const updateBooksList = (state, {type, payload}) => {\r\n    if (!state) {\r\n        return {\r\n            books: [],\r\n            loading: true,\r\n            error: null\r\n        }\r\n    }\r\n\r\n    switch (type) {\r\n        case 'FETCH_BOOKS_REQUEST':\r\n            return {\r\n                books: [],\r\n                loading: true,\r\n                error: null\r\n            };\r\n        case 'FETCH_BOOKS_SUCCESS':\r\n            return {\r\n                books: payload,\r\n                loading: false,\r\n                error: null\r\n            };\r\n        case 'FETCH_BOOKS_FAILURE':\r\n            return {\r\n                books: [],\r\n                loading: false,\r\n                error: payload\r\n            };\r\n        default:\r\n            return state.booksList\r\n    }\r\n};","const createCartItem = (selectedBook, bookInCart = {}, quantity) => {\r\n    const {\r\n        id = selectedBook.id,\r\n        title = selectedBook.title,\r\n        amount = 0,\r\n        totalPrice = 0\r\n    } = bookInCart;\r\n\r\n    return {\r\n        id,\r\n        title,\r\n        amount: amount + quantity,\r\n        totalPrice: totalPrice + quantity * selectedBook.price\r\n    }\r\n};\r\n\r\nconst createCartItems = (selectedBookInCart, cartItems, newCartItem, selectedBookId) => {\r\n    if (!newCartItem.amount) {\r\n        return [\r\n            ...cartItems.filter(item => item.id !== selectedBookId)\r\n        ]\r\n    }\r\n\r\n    return selectedBookInCart ?\r\n        cartItems.map(item => item.id === selectedBookId ? newCartItem : item) :\r\n        [...cartItems, newCartItem];\r\n};\r\n\r\nconst calculateOrderTotalPrice = cartItems => {\r\n    return cartItems.reduce((accumulator, currentItem) => accumulator + currentItem.totalPrice, 0)\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n    const {booksList: {books}, shoppingCart: {cartItems}} = state;\r\n    const selectedBook = books.find(book => book.id === bookId);\r\n    const selectedBookInCart = cartItems.find(item => item.id === bookId);\r\n    const newCartItem = createCartItem(selectedBook, selectedBookInCart, quantity);\r\n    const newCartItems = createCartItems(selectedBookInCart, cartItems, newCartItem, bookId);\r\n    const orderTotalPrice = calculateOrderTotalPrice(newCartItems);\r\n\r\n    return {\r\n        cartItems: newCartItems,\r\n        orderTotalPrice,\r\n        cartItemsAmount: newCartItems.length\r\n    };\r\n};\r\n\r\nexport const updateShoppingCart = (state, {type, payload}) => {\r\n    if (!state) {\r\n        return {\r\n            cartItems: [],\r\n            orderTotalPrice: 0,\r\n            cartItemsAmount: 0\r\n        }\r\n    }\r\n\r\n    switch (type) {\r\n        case 'ADD_BOOK_TO_CART':\r\n            return updateOrder(state, payload, 1);\r\n        case 'REMOVE_BOOK_FROM_CART':\r\n            return updateOrder(state, payload, -1);\r\n        case 'REMOVE_ALL_BOOKS_FROM_CART':\r\n            const selectedBookInCart = state.shoppingCart.cartItems.find(item => item.id === payload);\r\n\r\n            return updateOrder(state, payload, -selectedBookInCart.amount);\r\n        default:\r\n            return state.shoppingCart\r\n    }\r\n};","import {createStore, applyMiddleware} from \"redux\";\r\nimport {reducer} from \"./reducers\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nexport const store = createStore(reducer, applyMiddleware(thunk));","import {updateBooksList} from \"./updateBooksList\";\r\nimport {updateShoppingCart} from \"./updateShoppingCart\";\r\n\r\nexport const reducer = (state, action) => {\r\n    return {\r\n        booksList: updateBooksList(state, action),\r\n        shoppingCart: updateShoppingCart(state, action)\r\n    }\r\n};","import React from \"react\";\r\n\r\nexport const {\r\n    Provider: BookstoreServiceProvider,\r\n    Consumer: BookstoreServiceConsumer\r\n} = React.createContext(null);","export class BookStoreService {\r\n    books = [\r\n        {\r\n            id: 1,\r\n            title: 'Production-Ready Microservices',\r\n            author: 'Susan J. Fowler',\r\n            price: 32,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'\r\n        },\r\n        {\r\n            id: 2,\r\n            title: 'Release it!',\r\n            author: 'Michael T. Nygard',\r\n            price: 45,\r\n            coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'\r\n        }\r\n    ];\r\n\r\n    getBooks() {\r\n        return new Promise(resolve => {\r\n            setTimeout(() => {\r\n                resolve(this.books);\r\n            }, 1000);\r\n        });\r\n    }\r\n}","import React from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {HOME, CART} from \"../../constants/routes\";\r\nimport {connect} from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./ShopHeader.css\";\r\n\r\nconst ShopHeader = ({cartItemsAmount, orderTotalPrice}) => (\r\n    <header className=\"shop-header\">\r\n        <Link to={HOME} className=\"logo text-dark\">ReStore</Link>\r\n        <Link to={CART} className=\"shopping-cart\">\r\n            <i className=\"cart-icon fa fa-shopping-cart\">\r\n                <div className=\"cart-items-score\">{cartItemsAmount}</div>\r\n            </i>\r\n            Total: ${orderTotalPrice}\r\n        </Link>\r\n    </header>\r\n);\r\n\r\nShopHeader.propTypes = {\r\n    cartItemsAmount: PropTypes.number,\r\n    orderTotalPrice: PropTypes.number\r\n};\r\n\r\nconst mapStateToProps = ({shoppingCart: {orderTotalPrice, cartItemsAmount}}) => ({orderTotalPrice, cartItemsAmount});\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);","export const HOME = '/';\r\nexport const CART = '/cart';","const booksRequested = () => ({type: 'FETCH_BOOKS_REQUEST'});\r\n\r\nconst booksLoaded = newBooks => {\r\n    return {\r\n        type: 'FETCH_BOOKS_SUCCESS',\r\n        payload: newBooks\r\n    };\r\n};\r\n\r\nconst booksError = error => {\r\n    return {\r\n        type: 'FETCH_BOOKS_FAILURE',\r\n        payload: error\r\n    }\r\n};\r\n\r\nexport const addBookToCart = bookId => {\r\n    return {\r\n        type: 'ADD_BOOK_TO_CART',\r\n        payload: bookId\r\n    }\r\n};\r\n\r\nexport const removeBookFromCart = bookId => {\r\n    return {\r\n        type: 'REMOVE_BOOK_FROM_CART',\r\n        payload: bookId\r\n    }\r\n};\r\n\r\nexport const removeAllBooksFromCart = bookId => {\r\n    return {\r\n        type: 'REMOVE_ALL_BOOKS_FROM_CART',\r\n        payload: bookId\r\n    }\r\n};\r\n\r\nexport const fetchBooks = bookStoreService => () => dispatch => {\r\n    dispatch(booksRequested());\r\n\r\n    bookStoreService.getBooks()\r\n        .then(books => dispatch(booksLoaded(books)))\r\n        .catch(err => dispatch(booksError(err)));\r\n};","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./BooksListItem.css\";\r\n\r\nexport const BooksListItem = ({book, onAddToCart}) => {\r\n    const {title, author, price, coverImage} = book;\r\n\r\n    return (\r\n        <div className=\"card book-list-item\">\r\n            <img src={coverImage} alt=\"cover\"/>\r\n            <div className=\"card-body book-details\">\r\n                <h3 className=\"card-title\">{title}</h3>\r\n                <div className=\"book-author\">{author}</div>\r\n                <strong className=\"book-price\">${price}</strong>\r\n                <button className=\"btn btn-info add-to-cart\"\r\n                        onClick={onAddToCart}>\r\n                    Add to cart\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nBooksListItem.propTypes = {\r\n    book: PropTypes.exact({\r\n        title: PropTypes.string,\r\n        author: PropTypes.string,\r\n        price: PropTypes.number,\r\n        coverImage: PropTypes.string\r\n    }),\r\n    onAddToCart: PropTypes.func\r\n};\r\n","import React from \"react\";\r\n\r\nimport \"./Spinner.css\";\r\n\r\nexport const Spinner = () => (\r\n    <div className=\"spinner\">\r\n        <div className=\"loader\">Loading...</div>\r\n    </div>\r\n);","import React from \"react\";\r\n\r\nimport \"./ErrorIndicator.css\";\r\n\r\nexport const ErrorIndicator = () => (\r\n    <div className=\"error-indicator\">\r\n        <i className=\"fa fa-exclamation-triangle\"/>\r\n        Error occurred, please try again later\r\n    </div>\r\n);","import React, {useEffect} from \"react\";\r\nimport {withBookStoreService} from \"../hoc\";\r\nimport {fetchBooks, addBookToCart} from \"../../actions\";\r\nimport {connect} from \"react-redux\";\r\nimport {bindActionCreators} from \"redux\";\r\nimport {compose} from \"../../utils\";\r\nimport {BooksListItem} from \"../BooksListItem\";\r\nimport {Spinner} from \"../Spinner\";\r\nimport {ErrorIndicator} from \"../ErrorIndicator\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./BooksList.css\";\r\n\r\nconst BooksList = ({books, onAddToCart}) => (\r\n    <ul className=\"books-list\">\r\n        {\r\n            books.map(({id, ...bookInfo}) => (\r\n                <li key={id}>\r\n                    <BooksListItem book={bookInfo}\r\n                                   onAddToCart={() => onAddToCart(id)}/>\r\n                </li>\r\n            ))\r\n        }\r\n    </ul>\r\n);\r\n\r\nconst BooksListContainer = ({books, error, loading, onAddToCart, fetchBooks}) => {\r\n    useEffect(fetchBooks, []);\r\n\r\n    if (error) {\r\n        return <ErrorIndicator/>;\r\n    }\r\n\r\n    if (loading) {\r\n        return <Spinner/>;\r\n    }\r\n\r\n    return (\r\n        <BooksList books={books} onAddToCart={onAddToCart}/>\r\n    );\r\n};\r\n\r\nBooksListContainer.propTypes = {\r\n    books: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n    error: PropTypes.bool,\r\n    loading: PropTypes.bool,\r\n    fetchBooks: PropTypes.func.isRequired,\r\n    onAddToCart: PropTypes.func\r\n};\r\n\r\nconst mapStateToProps = ({booksList: {books, loading, error}}) => ({books, loading, error});\r\n\r\nconst mapDispatchToProps = (dispatch, {bookStoreService}) => {\r\n    return bindActionCreators({\r\n        fetchBooks: fetchBooks(bookStoreService),\r\n        onAddToCart: addBookToCart\r\n    }, dispatch);\r\n};\r\n\r\nexport default compose(\r\n    withBookStoreService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(BooksListContainer);\r\n","export const compose = (...functions) => comp => {\r\n    return functions.reduceRight((wrapped, fn) => fn(wrapped), comp)\r\n};","import React from \"react\";\r\nimport {BookstoreServiceConsumer} from \"../BookStoreServiceContext\";\r\n\r\nexport const withBookStoreService = () => Wrapped => {\r\n    return props => (\r\n        <BookstoreServiceConsumer>\r\n            {\r\n                bookStoreService => (\r\n                    <Wrapped {...props} bookStoreService={bookStoreService}/>\r\n                )\r\n            }\r\n        </BookstoreServiceConsumer>\r\n    );\r\n};","import React from \"react\";\r\nimport {BooksList} from \"../BooksList\";\r\n\r\nexport const HomePage = () => (\r\n    <div className=\"home-page\">\r\n        <BooksList/>\r\n    </div>\r\n);","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {addBookToCart, removeBookFromCart, removeAllBooksFromCart} from \"../../actions\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"./ShoppingCartTable.css\";\r\n\r\nconst ShoppingCartTable = ({items, total, onIncrease, onDecrease, onDelete}) => {\r\n    const renderRow = (item, index) => {\r\n        const {id, title, amount, totalPrice} = item;\r\n\r\n        return (\r\n            <tr key={id}>\r\n                <th>{index + 1}</th>\r\n                <td>{title}</td>\r\n                <td>{amount}</td>\r\n                <td>${totalPrice}</td>\r\n                <td>\r\n                    <div className=\"book-controls\">\r\n                        <button className=\"btn btn-outline-warning btn-sm\"\r\n                                onClick={() => onDecrease(id)}>\r\n                            <i className=\"fa fa-minus-circle\"/>\r\n                        </button>\r\n                        <button className=\"btn btn-outline-success btn-sm\"\r\n                                onClick={() => onIncrease(id)}>\r\n                            <i className=\"fa fa-plus-circle\"/>\r\n                        </button>\r\n                        <button className=\"btn btn-outline-danger btn-sm\"\r\n                                onClick={() => onDelete(id)}>\r\n                            <i className=\"fa fa-trash-o\"/>\r\n                        </button>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        )\r\n    };\r\n\r\n    const cartFooterInfo = items.length ? {\r\n            align : 'right',\r\n            text: `Total: $${total}`\r\n        } : {\r\n            align : 'center',\r\n            text: 'No books in cart yet'\r\n        };\r\n\r\n    return (\r\n        <div className=\"shopping-cart-table\">\r\n            <h2>Your Order</h2>\r\n            <table className=\"table table-striped table-responsive-sm\">\r\n                <thead className=\"thead-dark\">\r\n                    <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\">Item</th>\r\n                        <th scope=\"col\">Count</th>\r\n                        <th scope=\"col\">Price</th>\r\n                        <th scope=\"col\">Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {items.map(renderRow)}\r\n                </tbody>\r\n                <tfoot>\r\n                    <tr>\r\n                        <td colSpan = '100%' align={cartFooterInfo.align}>\r\n                            {cartFooterInfo.text}\r\n                        </td>\r\n                    </tr>\r\n                </tfoot>\r\n            </table>\r\n        </div>\r\n    );\r\n};\r\n\r\nShoppingCartTable.propTypes = {\r\n    items: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n    total: PropTypes.number,\r\n    onIncrease: PropTypes.func,\r\n    onDecrease: PropTypes.func,\r\n    onDelete: PropTypes.func\r\n};\r\n\r\nconst mapStateToProps = ({shoppingCart: {cartItems, orderTotalPrice}}) => {\r\n    return {\r\n        items: cartItems,\r\n        total: orderTotalPrice\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    onIncrease: addBookToCart,\r\n    onDecrease: removeBookFromCart,\r\n    onDelete: removeAllBooksFromCart\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ShoppingCartTable);","import React from \"react\";\r\nimport {ShoppingCartTable} from \"../ShoppingCartTable\";\r\n\r\nexport const CartPage = () => (\r\n    <div className=\"cart-page\">\r\n        <ShoppingCartTable/>\r\n    </div>\r\n);","import React from 'react';\r\n\r\nconst NotFoundPage = () => (\r\n    <div className=\"jumbotron text-center not-found-page\">\r\n        <h3>We can't find the page, that you're looking for :(</h3>\r\n    </div>\r\n);\r\n\r\nexport {NotFoundPage};","import React, {Component} from \"react\";\r\nimport {ErrorIndicator} from \"../ErrorIndicator\";\r\n\r\nexport class ErrorBoundary extends Component {\r\n    state = {\r\n        hasError: false\r\n    };\r\n\r\n    componentDidCatch() {\r\n        this.setState({hasError: true})\r\n    };\r\n\r\n    render() {\r\n        return this.state.hasError ? <ErrorIndicator/> : this.props.children;\r\n    }\r\n}","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {Provider} from \"react-redux\";\r\nimport {store} from \"./store\";\r\nimport {BookstoreServiceProvider} from \"./components/BookStoreServiceContext\";\r\nimport {BookStoreService} from \"./services/BookStoreService\";\r\nimport {HashRouter} from \"react-router-dom\";\r\nimport {App} from \"./components/App\";\r\nimport {ErrorBoundary} from \"./components/ErrorBoundary/ErrorBoundary\";\r\n\r\nimport \"font-awesome/css/font-awesome.min.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nconst bookStoreService = new BookStoreService();\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <ErrorBoundary>\r\n            <BookstoreServiceProvider value={bookStoreService}>\r\n                <HashRouter>\r\n                    <App/>\r\n                </HashRouter>\r\n            </BookstoreServiceProvider>\r\n        </ErrorBoundary>\r\n    </Provider>\r\n    , document.getElementById('root'));","import React from \"react\";\r\nimport {Switch, Route} from \"react-router-dom\";\r\nimport {ShopHeader} from \"../ShopHeader\";\r\nimport {HomePage, CartPage, NotFoundPage} from \"../pages\";\r\n\r\nimport \"./App.css\";\r\n\r\nexport const App = () => (\r\n    <div className=\"app\">\r\n        <ShopHeader/>\r\n        <main>\r\n            <Switch>\r\n                <Route path=\"/\" exact component={HomePage}/>\r\n                <Route path=\"/cart\" exact component={CartPage}/>\r\n                <Route component={NotFoundPage}/>\r\n            </Switch>\r\n        </main>\r\n    </div>\r\n);"],"sourceRoot":""}